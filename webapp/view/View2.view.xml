<mvc:View controllerName="zovgrp.controller.View2"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns="sap.m">
    <Page id="page2" title="{i18n>title}">
    <Button text="Processar" press="onProcessar" />
        <fb:FilterBar id="filterBar2" reset="onFilterReset" search="onFilterSearch">
        <fb:filterItems>
            <fb:FilterItem name="OrdemId" label="{i18n>OrdemId}">
                <fb:control>
                    <Input value="{filter>/OrdemId}" />
                </fb:control>
            </fb:FilterItem>
            <fb:FilterItem name="ClienteId" label="{i18n>ClienteId}">
                <fb:control>
                    <Input value="{filter>/ClienteId}" />
                </fb:control>
            </fb:FilterItem> 

            <fb:FilterItem name="OrdenacaoCampo" label="{i18n>OrdenacaoCampo}">
                <fb:control>
                    <Select selectedKey="{filter>/OrdenacaoCampo}">
                        <items>
                            <core:Item text="" key="" />
                            <core:Item text="{i18n>OrdemId}" key="OrdemId" />
                            <core:Item text="{i18n>CustomerId}" key="ClienteId" />
                            <core:Item text="{i18n>DataCriacao}" key="DataCriacao" />
                            <core:Item text="{i18n>CriadoPor}" key="CriadoPor" />
                            <core:Item text="{i18n>TotalItens}" key="TotalItens" />
                            <core:Item text="{i18n>TotalFrete}" key="TotalFrete" />
                            <core:Item text="{i18n>TotalOrdem}" key="TotalOrdem" />
                            <core:Item text="{i18n>Status}" key="Status" />
                        </items>
                    </Select>
                </fb:control>
            </fb:FilterItem>
            
            <fb:FilterItem name="OrdenacaoTipo" label="{i18n>OrdenacaoTipo}">
                <fb:control>
                    <Select selectedKey="{filter>/OrdenacaoTipo}">
                        <items>
                            <core:Item text="" key="" />
                            <core:Item text="{i18n>ASC}" key="ASC" />
                            <core:Item text="{i18n>DESC}" key="DESC" />  
                        </items>
                    </Select>
                </fb:control>
            </fb:FilterItem>

            <fb:FilterItem name="Limite" label="{i18n>Limite}">
                <fb:control>
                    <Input value="{filter>/Limite}" type="Number" />
                </fb:control>
            </fb:FilterItem> 

            <fb:FilterItem name="Offset" label="{i18n>Offset}">
                <fb:control>
                    <Input value="{filter>/Offset}" type="Number" />
                </fb:control>
            </fb:FilterItem> 

        </fb:filterItems>
        </fb:FilterBar>

        <FlexBox alignItems="Center" justifyContent="End">
            <Button text="Fornecer (L)" class="sapUITinyMarginEnd" press="onAtualizarStatus('L')" />
            <Button text="Faturar (F)" class="sapUITinyMarginEnd" press="onAtualizarStatus('F')" />
            <Button text="Cancelar (C)" class="sapUITinyMarginEnd" press="onAtualizarStatus('C')" />
        </FlexBox>    

        <t:Table id="table2"
        rows="{table>/}"
        selectionMode="MultiToggle"
        class="sapUiSmallMargin"
        rowMode="Fixed"
        threshold="5"
        visibleRowCount="5"
        enableBusyIndicator="true">
        <t:toolbar>
            <OverflowToolbar>
            <Title id="title" text="Ordens"></Title>
            </OverflowToolbar>
        </t:toolbar>
        <t:columns>
            <t:Column width="100px" sortProperty="OrdemId">
                <Label text="{i18n>OrdemId}" />
                <t:template>
                    <Text text="{table>OrdemId}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="DataCriacao">
                <Label text="{i18n>DataCriacao}" />
                <t:template>
                    <Text text="{path: 'table>DataCriacao', type: 'sap.ui.model.odata.type.Date', formatOptions: { UTC: true, pattern: 'dd/MM/yyyy'}}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="ClienteId" filterProperty="ClienteId">
                <Label text="{i18n>ClienteId}" />
                <t:template>
                    <Text text="{table>ClienteId}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="CriadoPor" filterProperty="CriadoPor">
                <Label text="{i18n>CriadoPor}" />
                <t:template>
                    <Text text="{table>CriadoPor}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="TotalItens" filterProperty="TotalItens">
                <Label text="{i18n>TotalItens}" />
                <t:template>
                    <Text text="{table>TotalItens}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="TotalFrete" filterProperty="TotalFrete">
                <Label text="{i18n>TotalFrete}" />
                <t:template>
                    <Text text="{table>TotalFrete}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="TotalOrdem" filterProperty="TotalOrdem">
                <Label text="{i18n>TotalOrdem}" />
                <t:template>
                    <Text text="{table>TotalOrdem}" wrapping="false" />
                </t:template>
            </t:Column>
            <t:Column width="100px" sortProperty="Status" filterProperty="Status" autoResizable="true">
                <Label text="{i18n>Status}" />
                <t:template>
                    <Text text="{path: 'table>Status', formatter: '.formatter.formatStatus'}" wrapping="false" />
                </t:template>
            </t:Column>
        </t:columns>
        </t:Table>
    </Page>
</mvc:View>